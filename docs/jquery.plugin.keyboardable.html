<!DOCTYPE html>  <html> <head>   <title>jquery.plugin.keyboardable.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="app.controller.html">                 app.controller.coffee               </a>                                           <a class="source" href="app.controller.form.html">                 app.controller.form.coffee               </a>                                           <a class="source" href="app.controller.list.html">                 app.controller.list.coffee               </a>                                           <a class="source" href="app.controller.navigation.html">                 app.controller.navigation.coffee               </a>                                           <a class="source" href="app.local_model.html">                 app.local_model.coffee               </a>                                           <a class="source" href="app.model.html">                 app.model.coffee               </a>                                           <a class="source" href="app.web_model.html">                 app.web_model.coffee               </a>                                           <a class="source" href="controller.edit_navigation.html">                 controller.edit_navigation.coffee               </a>                                           <a class="source" href="controller.modify_form.html">                 controller.modify_form.coffee               </a>                                           <a class="source" href="controller.todo_form.html">                 controller.todo_form.coffee               </a>                                           <a class="source" href="controller.todos_list.html">                 controller.todos_list.coffee               </a>                                           <a class="source" href="model.category.html">                 model.category.coffee               </a>                                           <a class="source" href="model.todo.html">                 model.todo.coffee               </a>                                           <a class="source" href="jquery.plugin.clickable.html">                 jquery.plugin.clickable.coffee               </a>                                           <a class="source" href="jquery.plugin.keyboardable.html">                 jquery.plugin.keyboardable.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.plugin.keyboardable.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-1">#</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">jQuery.fn.keyboardable: </span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-2">#</a>               </div>               <p>Take in some basic defaults. I'm using the jquery.hotkeys module to allow us
to define keys in plain english instead of by keyCode. So we can say "return"
instead of "13". It makes life easier and allows us to use combinators easily
so we could say "shift+up" or "ctrl+up" rather than "up".</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="nv">defaults: </span><span class="p">{</span>
      <span class="nv">class_active: </span> <span class="s2">&quot;active&quot;</span>
      <span class="nv">key_next: </span>     <span class="s2">&quot;down&quot;</span>
      <span class="nv">key_previous: </span> <span class="s2">&quot;up&quot;</span>
      <span class="nv">key_click: </span>    <span class="s2">&quot;space&quot;</span>
   <span class="p">}</span>
   <span class="nv">settings: </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">defaults</span><span class="p">,</span><span class="nx">options</span><span class="p">)</span>
   </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-3">#</a>               </div>               <p>KeyboardNavigation class stores the objects passed to the plugin. It stores 
the current item and marks items as selected or deselected as you traverse
through them with the keyboard.</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="nx">class</span> <span class="nx">KeyboardNavigation</span>
      <span class="nv">constructor: </span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="o">-&gt;</span>
         <span class="vi">@objects: </span><span class="nx">objects</span>
         <span class="vi">@index: </span><span class="kc">false</span>
         <span class="vi">@active: </span><span class="kc">false</span>
         </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-4">#</a>               </div>               <p>Here we bind the key events to the document so that they have a 
global effect on the user's keyboard input.</p>             </td>             <td class="code">               <div class="highlight"><pre>         <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">key_next</span><span class="p">,</span> <span class="o">=&gt;</span> <span class="nx">@next</span><span class="p">())</span>
         <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">key_previous</span><span class="p">,</span> <span class="o">=&gt;</span> <span class="nx">@previous</span><span class="p">())</span>
         <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">key_click</span><span class="p">,</span> <span class="o">=&gt;</span> <span class="nx">@select</span><span class="p">())</span>
      <span class="nv">next: </span><span class="o">-&gt;</span>
         <span class="k">if</span> <span class="nx">@index</span> <span class="o">or</span> <span class="nx">@index</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="nx">@index</span><span class="o">++</span> <span class="k">if</span> <span class="nx">@index</span> <span class="o">&lt;</span> <span class="nx">@objects</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span>
         <span class="k">else</span> 
            <span class="nx">@index</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="nx">@activate</span><span class="p">(</span><span class="nx">@index</span><span class="p">)</span>
      <span class="nv">previous: </span><span class="o">-&gt;</span>
         <span class="nx">@index</span><span class="o">--</span> <span class="k">if</span> <span class="nx">@index</span> <span class="o">and</span> <span class="nx">@index</span> <span class="o">&gt;</span> <span class="mi">0</span>
         <span class="nx">@activate</span><span class="p">(</span><span class="nx">@index</span><span class="p">)</span>
      <span class="nv">activate: </span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="o">-&gt;</span>
         <span class="nx">@active</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">class_active</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@active</span>
         <span class="nx">@active</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@objects</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">index</span><span class="p">)).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">class_active</span><span class="p">)</span>
      <span class="nv">select: </span><span class="o">-&gt;</span>
         <span class="nx">@active</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@active</span>
            </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-5">#</a>               </div>               <p>Store the keyboard navigation object as a global property so that 
it doesn't get declared multiple times. We only want one instance of this
object. In the future we may want to develop a way to append more objects
or flush the current list of objects from the navigation. This could be 
useful if we load in a new list via ajax, etc. etc.</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="k">if</span> <span class="nb">window</span><span class="o">?</span>
      <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">keyboard_navigation</span><span class="o">?</span>
         <span class="nv">keyboard_navigation: </span><span class="nb">window</span><span class="p">.</span><span class="nx">keyboard_navigation</span>
      <span class="k">else</span>
         <span class="nv">keyboard_navigation: </span><span class="k">new</span> <span class="nx">KeyboardNavigation</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
         <span class="nb">window</span><span class="p">.</span><span class="nv">keyboard_navigation: </span><span class="nx">keyboard_navigation</span>
   </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="octowrap">                 <a class="octothorpe" href="#section-6">#</a>               </div>               <p>Follow the convention of returning 'this' so that the plugin is chainable
when using it in jquery.</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="k">this</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 